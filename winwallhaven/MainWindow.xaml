<?xml version="1.0" encoding="utf-8"?>

<Window
    x:Class="winwallhaven.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Title="winwallhaven">

    <Window.SystemBackdrop>
        <MicaBackdrop />
    </Window.SystemBackdrop>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <!-- Custom title bar surface; height is controlled by code via PreferredHeightOption. -->
        <Grid x:Name="AppTitleBar"
              Grid.Row="0"
              Height="56"
              Background="Transparent">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <!-- App logo + title (left) -->
            <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center" Margin="12,0,12,0">
                <Image Source="ms-appx:///Assets/Square44x44Logo.png"
                       Width="24" Height="24" Stretch="Uniform" Margin="0,0,8,0" />
                <TextBlock Text="winwallhaven" VerticalAlignment="Center" Opacity="0.7" />
            </StackPanel>

            <!-- Center search box shown only on the Search page -->
            <Grid x:Name="TitleSearchHost"
                  Grid.Column="1"
                  HorizontalAlignment="Center"
                  VerticalAlignment="Center"
                  Width="520"
                  Visibility="Collapsed">
                <TextBox x:Name="TitleSearchBox"
                         PlaceholderText="Search"
                         Text="{Binding Query, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                         KeyDown="TitleSearchBox_KeyDown"
                         CornerRadius="8"
                         Padding="12,8,12,8" />
            </Grid>

            <!-- Right placeholder (can host future controls) -->
            <Grid Grid.Column="2" />
        </Grid>

        <NavigationView x:Name="NavView"
                        Grid.Row="1"
                        IsBackButtonVisible="Collapsed"
                        IsSettingsVisible="True"
                        PaneDisplayMode="LeftCompact"
                        SelectionChanged="NavView_OnSelectionChanged"
                        Loaded="NavView_OnLoaded">
            <NavigationView.MenuItems>
                <NavigationViewItem x:Name="LatestItem" Content="Latest" Tag="Latest" Foreground="#ad3">
                    <NavigationViewItem.Icon>
                        <SymbolIcon Symbol="Clock" />
                    </NavigationViewItem.Icon>
                </NavigationViewItem>
                <NavigationViewItem x:Name="ToplistItem" Content="Toplist" Tag="Toplist" Foreground="#b760f0">
                    <NavigationViewItem.Icon>
                        <SymbolIcon Symbol="Favorite" />
                    </NavigationViewItem.Icon>
                </NavigationViewItem>
                <NavigationViewItem x:Name="RandomItem" Content="Random" Tag="Random" Foreground="#e73">
                    <NavigationViewItem.Icon>
                        <SymbolIcon Symbol="Sync" />
                    </NavigationViewItem.Icon>
                </NavigationViewItem>
                <NavigationViewItem x:Name="HistoryItem" Content="History" Tag="History" Foreground="#6ab">
                    <NavigationViewItem.Icon>
                        <!-- Using MDL2 font glyph for a clock/history-like icon -->
                        <FontIcon Glyph="&#xE81C;" />
                    </NavigationViewItem.Icon>
                </NavigationViewItem>
                <NavigationViewItem x:Name="SearchItem" Content="Search" Tag="Search">
                    <NavigationViewItem.Icon>
                        <SymbolIcon Symbol="Find" />
                    </NavigationViewItem.Icon>
                </NavigationViewItem>
            </NavigationView.MenuItems>

            <NavigationView.FooterMenuItems>
                <NavigationViewItem x:Name="AboutItem" Content="About" Tag="About">
                    <NavigationViewItem.Icon>
                        <SymbolIcon Symbol="Help" />
                    </NavigationViewItem.Icon>
                </NavigationViewItem>
                <NavigationViewItem x:Name="ReportBugItem" Content="Report a bug" Tag="ReportBug">
                    <NavigationViewItem.Icon>
                        <SymbolIcon Symbol="Important" />
                    </NavigationViewItem.Icon>
                </NavigationViewItem>
                <NavigationViewItem x:Name="FeedbackItem" Content="Feedback" Tag="Feedback">
                    <NavigationViewItem.Icon>
                        <SymbolIcon Symbol="Like" />
                    </NavigationViewItem.Icon>
                </NavigationViewItem>
            </NavigationView.FooterMenuItems>

            <Frame x:Name="RootFrame" />
        </NavigationView>
    </Grid>
</Window>